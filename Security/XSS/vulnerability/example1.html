<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSS Example</title>
</head>
<body>

    <!-- Vulnerable Code -->
     <div>
        Welcome, <span id="username"></span>!
     </div>



     <script>
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name');
        document.getElementById('username').innerHTML = name;    //instead of innerHTML, always prefer innerText or textContent (bceause "innerHTMl" can execute scripts but the rest are not) to avoid XSS

        //use Escaping Mechanism
        /*
            const sanitizedName = name.replace(/</g, "&lt;").replace(/>/g, "&gt;");  //what it does is it replaces the < and > with &lt; and &gt so that the browser doesn't execute the script;
            document.getElementById('username').innerHTML = sanitizedName;
        
        */

        //use libraries like "DOMPurify" to sanitize the data
            /*
                const sanitizedName = DOMPurify.sanitize(name);
                document.getElementById('username').textContent = sanitizedName;
            */

        //CSP Headers
        
     </script>
    
</body>
</html>